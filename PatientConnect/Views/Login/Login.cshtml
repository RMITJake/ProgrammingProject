@model LoginVM

<div class="modal-grid">
    <div class="modal-header">
        <button id="btnHideModal" type="button" class="btn btn-secondary" data-dismiss="modal">×</button>
        <h4 class="modal-title">Login</h4>
    </div><!-- modal-header-->
    <div class="modal-body">
        <form id="loginForm" asp-action="Login" asp-controller="Login">
            <div class="form-group">
                <input asp-for="Email" class="form-control" placeholder="Email address" required/>
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input asp-for="Password" id="Password" name="Password" type="password" class="form-control" placeholder="Password" required/>
                <span asp-validation-for="Password" class="text-danger"></span>
                @* @Html.ValidationMessage("Password", new { @class = "text-danger" }) *@
            </div>
            @Html.ValidationMessage("LoginFailed", new { @class = "text-danger" })
            <div class="form-group submit">
                <input type="submit" value="Login" class="btn registerbutton" />
            </div>
            
        </form>
    </div><!-- modal-body-->
</div>

@* <script>
    $(document).ready(function () {

        // handle form submission
        $("#loginForm").submit(function (event) {
            event.preventDefault();             // prevent default form submission

            var formData = $(this).serialize();    // serialise form data

            // submit form data using ajax
            $.post($(this).attr('action'), formData)
                .done(function (response) {

                    if (response.success) {
                        // on success, redirect to home
                        window.location.href = '/Home/Index';
                    }
                    else {

                        // display error message, reload modal
                        $('#loginModal').modal('show');
                        $('.modal-content').html(response); // Update modal content
                    }


                })
                .fail(function (xhr, status, error) {

                    // andle error if login fails
                    console.error(xhr.responseText);
                })
        })
    })
</script> *@

<script type="text/javascript">
    $(document).ready(function () {
        $("#loginbutton").click(function () {
            $("#loginModal").modal('show');
        });

        $("#btnHideModal").click(function () {
            $("#loginModal").modal('hide');
        });
    });
</script>